{% extends '/careers/careers_base.html' %}

{% block meta_description %}Canonical offers a truly distributed workplace for exceptional colleagues who are
self-motivated, organised. Maintain a home office and experience the top of global technology strategy and engineering.
Travel regularly to interesting destinations for team, conference and customer engagements.{% endblock %}

{% block hero %}
<section class="p-strip--image is-dark is-deep u-no-padding--top u-no-padding--bottom u-extra-space">
  <div class="p-strip--suru-background">
    <div class="row">
      <div class="col-6">
        <h1>Careers</h1>
      </div>
    </div>
  </div>
</section>
<style>
  .p-strip--suru-background {
    background-image:
      linear-gradient(to bottom right, rgba(74, 24, 60, 0.4) 0%, rgba(74, 24, 60, 0.4) 49.9%, rgba(74, 24, 60, 0) 50%, rgba(74, 24, 60, 0) 100%),
      linear-gradient(to top right, rgba(210, 180, 202, 0) 0%, rgba(210, 180, 202, 0) 49.9%, rgba(210, 180, 202, 0.05) 50%, rgba(210, 180, 202, 0.05) 100%),
      linear-gradient(to top right, #fff 0%, #fff 49%, transparent 50%),
      linear-gradient(140deg, #E95420 0%, #772953 33%, #2C001E 72%);
    background-position: left top, right top, left 101%;
    background-size: 80% 100%, 70% 80%, 110% 20%, 100% 100%;
    padding-bottom: 6rem;
    padding-top: 6rem;
  }
</style>
{% endblock %}

{% block overview %}
<div class="row u-sv3 js-roles-list--container">
  <div class="col-8">
    {% if not(message) %}
    <div class="p-card" style="border-style: none; background-color:#f7f7f7;">
      <div class="p-card__content" style="display: flex;">
        <div>
          <i class="p-icon--success" style="height: 1.5rem; width: 1.5rem;"></i>
        </div>
        <div style="padding-left: 1rem;">
          <p class="p-heading--three">Looks like you're interested in
            {% if departments|length == 1 %}
            {{ departments[0]|lower }}
            {% else %}
            {% for departments in departments %}
            {% if loop.index < departments|length-1 %}
            {{ departments|lower }},
            {% elif loop.index < departments|length %}
            {{ departments|lower }}
            {% else %}
            and {{ departments|lower }}
            {% endif %}
            {% endfor %}
            {% endif %}</p>
          <div class="row">
            <div class="col-6">
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Laudantium ad ducimus repellat ipsa
                exercitationem rem at vitae amet consectetur repudiandae possimus nulla, quasi facilis magnam iste
                recusandae libero accusantium?</p>
            </div>
            <div class="col-2 u-align--center u-vertically-center">
              <p>
                <a href="/careers/start" class="p-button--positive">Retake choices</a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% endif %}
    <div class="row u-vertically-center">
      <div class="col-8 u-align--right">
        <form action="" method="get" class="p-form p-form--inline">
          <div class="p-form__group">
            <label for="filter" aria-label="Filter by job type" class="p-form__label">Filter by</label>
            <select class="js-filter p-form__control" id="filter" name="filter" aria-label="Filter by job type">
              <option>All</option>
              <option>Home based</option>
              <option>Office based</option>
              <option>Management</option>
              <option>Full-time</option>
              <option>Part-time</option>
            </select>
          </div>
          <div class="p-form__group">
            <label for="sort" aria-label="Sort resources" class="p-form__label">Sort by</label>
            <select class="js-sort p-form__control" id="sort" name="sort" aria-label="Sort resources">
              <option>Date</option>
              <option>Location</option>
              <option>Job sector</option>
            </select>
          </div>
        </form>
        <hr />
      </div>
    </div>
    <div class="row">
      <div class="col-8">
        {% if message %}
        <div class="u-align--center">
          <p>{{ message }} <a href="/careers/start">Retake choices again?</a></p>
        </div>
        {% else %}
        <form>
          <ul class="p-list--divided js-job-list">
            {% for job in vacancies %}
            <li class="p-list__item" data-office="{{ job.office }}" data-employment="{{ job.employment }}"
              data-date="{{ job.date }}" data-location="{{ job.location }}" data-management="{{ job.management}}"
              data-sector="{{ job.departments }}">
              <p class="u-no-margin--bottom u-sv1"><small style="padding-left: 2rem;">{{ job.location }}</small></p>
              <input type="checkbox" name="{{ job.title }}" id="{{ job.id }}" class="js-roles-list--select" />
              <label class="p-checkbox-label--h2 u-no-padding--top" for="{{ job.id }}">
                <h2 class="u-no-margin--bottom u-sv1">
                  <a class="p-link--soft" href="/careers/job/{{ job.id }}">{{ job.title }}&nbsp;&rsaquo;</a>
                  </h2>
              </label>
            </li>
            {% endfor %}
          </ul>
          <hr />
          <button class="p-button--positive js-roles-list--apply-button" type="submit">Apply now</button>
        </form>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<div class="row u-extra-space js-roles-apply--container u-hide">
  <div class="col-8">
    <a href="" class="u-sv3 js-back-button">&lsaquo;&nbsp;Back to list</a>
    <div class="p-card--strip u-no-margin--bottom">
      <h3>Roles applying for:</h3>
      <div class="row u-sv3">
        <div class="col-5">
          <ul style="list-style: none;">
          {% for job in vacancies %}
            <li class="js-roles-apply--select">
              <input type="checkbox" id="{{ job.id }}-apply" name="{{ job.title }}" checked>
              <label for="{{ job.id }}-apply">{{ job.title }}</label>
            </li>
          {% endfor %}
          </ul>
        </div>
        <div class="col-3 u-align--right">
          <button class="p-button has-icon js-roles-apply--add-button"><i class="p-icon--plus"></i><span>Add more
              roles</span></button>
        </div>
      </div>
      <hr />
      <form action="/careers/thank-you" method="POST" enctype="multipart/form-data" class="js-roles-list--form">
        <fieldset style="border: none; margin-bottom: 0;">
          <input type="hidden" value="" name="applicationJobIdList" id="applicationJobIdList"/>
          <input type="hidden" value="" name="applicationJobTitleList" id="applicationJobTitleList"/>
          <p class="required-legend u-align-text--right ">Required</p>
          <label for="first_name" class="is-required u-no-padding--top">First name</label>
          <input id="first_name" name="first_name" type="text">
          <label for="last_name" class="is-required">Last name</label>
          <input id="last_name" name="last_name" type="text">
          <label for="email" class="is-required">Email address</label>
          <input id="email" name="email" type="text">
          <label for="phone" class="is-required">Phone</label>
          <input id="phone" name="phone" type="text">
          <label for="location" class="is-required">Location (City)</label>
          <input id="location" name="location" type="text" class="js-location">
          <button type="button" class="js-locate-me">Locate me</button>
          <span class="js-locate-error u-hide" style="color: #c7162b">Location unavailable</span>
          <label for="resume" class="is-required">Upload CV</label>
          <input type="file" id="resume" name="resume" accept=".pdf, .doc, .docx, .txt, .rtf"
            onchange="return fileValidation()">
          <label for="cover_letter">Cover Letter</label>
          <input type="file" id="cover_letter" name="cover_letter" accept=".pdf, .doc, .docx, .txt, .rtf"
            onchange="return fileValidation()">
          <hr />
          <div class="education-container">
            <div data-education="0">
              <label for="school-0">School</label>
              <input list="school-0" name="school-0" type="text" class="js-school-0">
              <datalist id="school-0">
              </datalist>
              <label for="degree-0">Degree</label>
              <input list="degree-0" name="degree-0" type="text">
              <datalist id="degree-0">
              </datalist>
              <label for="discipline-0">Discipline</label>
              <input list="discipline-0" name="discipline-0" type="text">
              <datalist id="discipline-0">
              </datalist>
              <div class="p-form--inline">
                <div class="p-form__group">
                  <label class="p-form__label">Start date</label>
                  <div class="p-form__control u-clearfix">
                    <input placeholder="MM" id="start-month-0" name="start-month-0" type="text" class="p-form__control">
                  </div>
                  <div class="p-form__control u-clearfix">
                    <input placeholder="YYYY" id="start-year-0" name="start-year-0" type="text" class="p-form__control">
                  </div>
                </div>
              </div>
              <div class="p-form--inline">
                <div class="p-form__group">
                  <label class="p-form__label">End date</label>
                  <div class="p-form__control u-clearfix">
                    <input placeholder="MM" id="end-month-0" name="end-month-0" type="text" class="p-form__control">
                  </div>
                  <div class="p-form__control u-clearfix">
                    <input placeholder="YYYY" id="end-year-0" name="end-year-0" type="text" class="p-form__control">
                  </div>
                </div>
              </div>
            </div>
          </div>
          <button type="button" class="p-button has-icon js-add-education"><i class="p-icon--plus"></i><span>Add another education</span></button>
          <hr />
          <label for="github">Github profile</label>
          <input type="text" id="github" name="github">
          <label for="linkedin">LinkedIn profile</label>
          <input type="text" id="linkedin" name="linkedin">
          <label for="website">Website</label>
          <input type="text" id="website" name="website">
          <label for="answer" class="is-required">How did you hear about this job?</label>
          <input type="text" id="answer" name="answer">
          <hr style="margin: 1rem 0;" />
          <button type="submit" class="p-button--positive u-no-margin--bottom">Submit Application</button>
        </fieldset>
      </form>
    </div>
  </div>
</div>

<script defer src="/static/js/careers-filter&sort.js"></script>
<script defer src="/static/js/careers-results.js"></script>
<script defer src="/static/js/apply-for-jobs.js"></script>
<script>
  function fileValidation() {
    var fileInput = document.getElementById('resume');
    var filePath = fileInput.value;
    var allowedExtensions = /(\.pdf|\.doc|\.docx|\.txt|\.rtf)$/i;
    if (!allowedExtensions.exec(filePath)) {
      alert('Invalid file format selected. Allowed formats are: pdf, doc, docx, txt, rtf');
      fileInput.value = '';
      return false;
    }
  }
</script>
{% endblock %}